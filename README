 
Destroy database on heroku : heroku pg:reset DATABASE

Migrate on heroku: heroku run python manage.py syncdb

Setting up local postgres database
0. pip install -r requirements.txt
1. sudo apt-get install postgresql
2. edit : /etc/postgresql/9.3/main/pg_hba.conf 
change: 
local   all    postgres    trust 
sudo service postgresql restart
sudo su postgres
psql
=# CREATE USER testadmin WITH CREATEDB PASSWORD 'testing';
=# CREATE DATABASE django_testdb OWNER testadmin;
=#\q
exit

now do the tests
python manage.py test lists
python manage.py test functional_tests
python manage.py runserver
. setlocal
python manage.py migrate
python manage.py test functional_tests --liverserver=localhost:8000

-----

Implementing on an Ubuntu VPS
1. Consider upgrading ansible to latest version (>1.8 was needed) using ppa:ansible/ansible 
2. login to server as root and change password. Set locale: 
export LANGUAGE=en_US.UTF-8
export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8
locale-gen en_US.UTF-8
dpkg-reconfigure locales

#create user remoteu
ansible-playbook -i rootf sshkey.yml -u root  --ask-vault-pass
#This user should be able to login and sudo without password
ansible-playbook -i development -u remoteu 
4. Running command "ansible-playbook -i development -u root ..." better to use -vvv option. 

editing vaulted files ansible-vault edit --vault-password-file ~/.vault_pass.txt env_vars/dev.yml

ansible-playbook -i development  site.yml --vault-password-file ~/.vault_pass.txt 
